# 🚀 部署前檢查清單

## 第一部分：LINE Developers Console 設定
- [ ] 已登入 [LINE Developers Console](https://developers.line.biz/console/)
- [ ] 已建立 LINE Login Channel
- [ ] Channel 名稱設定為「小汪記記 Web」
- [ ] App type 選擇「Web app」
- [ ] 已複製 Channel ID
- [ ] 已複製 Channel Secret
- [ ] 已加入本地測試 Callback URL：`http://localhost:3000/auth/line/callback`
- [ ] 已加入生產環境 Callback URL：`https://您的域名/auth/line/callback`

## 第二部分：本地測試
- [ ] 已安裝所有相依套件 (`npm install`)
- [ ] 已建立 `.env` 檔案
- [ ] 已填寫 LINE_LOGIN_CHANNEL_ID
- [ ] 已填寫 LINE_LOGIN_CHANNEL_SECRET
- [ ] 已設定 SESSION_SECRET（隨機字串）
- [ ] 本地伺服器可以啟動 (`node server.js`)
- [ ] 可以訪問 `http://localhost:3000`
- [ ] 點擊「使用 LINE 登入」可以跳轉到 LINE
- [ ] 授權後可以成功返回
- [ ] 可以看到使用者資訊

## 第三部分：程式碼準備
- [ ] 已確認 Bot 功能正常運作
- [ ] 已確認 LINE Login 不影響 Bot
- [ ] 已更新 `.gitignore`（確保 .env 不會上傳）
- [ ] 已移除所有測試用的 console.log
- [ ] 已檢查沒有洩漏敏感資訊

## 第四部分：生產環境配置

### Render 部署
- [ ] 已在 Render Dashboard 建立新專案
- [ ] 已連接 GitHub 儲存庫
- [ ] 已設定環境變數：
  - [ ] LINE_CHANNEL_ACCESS_TOKEN
  - [ ] LINE_CHANNEL_SECRET
  - [ ] LINE_LOGIN_CHANNEL_ID
  - [ ] LINE_LOGIN_CHANNEL_SECRET
  - [ ] LINE_LOGIN_REDIRECT_URI (https://xxx.onrender.com/auth/line/callback)
  - [ ] SESSION_SECRET
  - [ ] SUPABASE_URL（如果使用）
  - [ ] SUPABASE_ANON_KEY（如果使用）

### Zeabur 部署
- [ ] 已在 Zeabur 建立專案
- [ ] 已連接 Git 儲存庫
- [ ] 已在環境變數頁面設定所有必要變數
- [ ] 已確認域名設定

### Vercel 部署
- [ ] 已安裝 Vercel CLI
- [ ] 已執行 `vercel` 命令
- [ ] 已在專案設定中加入環境變數

## 第五部分：安全檢查
- [ ] SESSION_SECRET 是隨機生成的（不是預設值）
- [ ] 所有 Secret 都不在程式碼中
- [ ] `.env` 檔案已加入 `.gitignore`
- [ ] 生產環境使用 HTTPS
- [ ] Cookie 設定適合生產環境

## 第六部分：資料庫設定（如果使用 Supabase）
- [ ] 已建立 Supabase 專案
- [ ] 已建立 `users` 表格
- [ ] 已建立 `messages` 表格
- [ ] 已取得 SUPABASE_URL
- [ ] 已取得 SUPABASE_ANON_KEY
- [ ] 已在環境變數中設定

## 第七部分：最終測試
- [ ] 生產環境可以訪問
- [ ] Bot Webhook 正常運作
- [ ] LINE Login 可以使用
- [ ] 資料可以正確儲存（如果有資料庫）
- [ ] 錯誤處理正常運作

## 第八部分：監控與維護
- [ ] 已設定錯誤追蹤（選用）
- [ ] 已設定效能監控（選用）
- [ ] 已記錄部署日期和版本
- [ ] 已備份環境變數設定

---

## 🎯 快速行動清單

如果時間緊迫，至少要完成：

1. ⭐ LINE Login Channel 建立和設定
2. ⭐ 環境變數正確配置
3. ⭐ 本地測試通過
4. ⭐ HTTPS 設定（生產環境）
5. ⭐ SESSION_SECRET 不是預設值

---

## ⚠️ 常見錯誤預防

1. **不要**把 .env 檔案提交到 Git
2. **不要**在程式碼中硬編碼任何 Secret
3. **不要**忘記設定生產環境的 Callback URL
4. **不要**使用 HTTP（必須 HTTPS）
5. **不要**忘記測試錯誤情況

---

## 📝 部署記錄

請在部署後填寫：

- 部署日期：____________________
- 部署平台：____________________
- 生產環境網址：____________________
- 版本號碼：____________________
- 部署人員：____________________
- 特殊說明：____________________

---

## Linus 的最後提醒

"檢查清單完成了不代表系統就沒問題。"
"真正的測試是使用者開始使用的時候。"
"保持監控，隨時準備修復問題。"

**最重要的原則：Never break userspace！**